<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ending Signal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        :root {
            --bg-app: #121212;
            --bg-card: #1E1E1E;
            --bg-overlay: rgba(30, 30, 30, 0.85);
            --brand-primary: #4F46E5;
            --brand-secondary: #FACC15;
            --text-white: #FFFFFF;
            --text-gray-100: #E5E5E5;
            --text-gray-400: #A3A3A3;
            --text-gray-600: #525252;
            --brand-glow: 0 0 10px rgba(79, 70, 229, 0.5);
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
            background-color: var(--bg-app);
            color: var(--text-white);
            margin: 0;
            overscroll-behavior-y: contain;
        }

        #app-root {
            width: 100%;
            max-width: 480px;
            min-height: 100vh;
            margin: 0 auto;
            background-color: var(--bg-app);
            position: relative;
            overflow-x: hidden;
            box-shadow: none;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (Global) */
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }

        /* Safe Area for Bottom Nav */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }

        /* Animation Utilities */
        .spring-bounce:active { transform: scale(0.95); transition: transform 0.1s; }
        .fade-in { animation: fadeIn 0.2s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Neon Glow Utilities */
        .neon-glow {
            box-shadow: var(--brand-glow);
        }
        .neon-text-glow {
            text-shadow: 0 0 8px rgba(79, 70, 229, 0.6);
        }
        .neon-drop-shadow {
            filter: drop-shadow(0 0 5px rgba(79, 70, 229, 0.6));
        }

        /* Glassmorphism - Updated to match unified BG #121212 */
        .glass-bg {
            background-color: rgba(18, 18, 18, 0.95); /* #121212 with slight transparency */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* L1 Logo Filter Styles */
        .l1-logo {
            width: 42px; height: 42px; border-radius: 50%;
            transition: all 0.2s;
            background-color: #333; /* Placeholder for logo img */
            display: flex; align-items: center; justify-content: center;
            font-size: 10px; font-weight: bold; color: #fff;
        }
        .l1-logo.active {
            border: 2px solid var(--brand-primary);
            opacity: 1;
            box-shadow: var(--brand-glow);
        }
        .l1-logo.inactive { opacity: 0.4; filter: grayscale(100%); }

        /* L2 Text Tab Styles */
        .l2-tab {
            font-size: 13px; font-weight: 500;
            color: var(--text-gray-600);
            padding: 8px 0;
            margin-right: 20px;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        .l2-tab.active {
            color: var(--text-white);
            border-bottom-color: var(--brand-primary);
            text-shadow: 0 0 5px rgba(255,255,255,0.3);
        }

        /* Skeleton Loading */
        .skeleton {
            background-color: var(--bg-card);
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body class="antialiased">

    <div id="app-root">
        <!-- 3.1 Sticky Header -->
        <header id="mainHeader" class="sticky top-0 z-50 h-[56px] px-4 glass-bg border-b border-white/5 flex items-center justify-between transition-all duration-300">
            <div id="homeButton" class="flex items-center cursor-pointer spring-bounce">
                <h1 class="text-[22px] font-black text-white tracking-tighter flex items-center">
                    EN<span class="text-[#FACC15] text-[20px] ml-0.5 -rotate-15 transform block">ğŸ””</span>
                </h1>
            </div>
            <div class="flex items-center gap-4">
                <div id="headerSearchWrap" class="relative flex items-center">
                    <button id="searchButton" class="spring-bounce">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                    <input
                        id="searchInput"
                        type="text"
                        class="ml-0 w-0 opacity-0 pointer-events-none transition-all duration-200 bg-[#1E1E1E] border border-white/10 rounded-xl px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#4F46E5]"
                        placeholder="ê²€ìƒ‰"
                    />
                    <button
                        id="searchClearBtn"
                        class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white hidden"
                        aria-label="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°"
                    >âœ•</button>
                    <div
                        id="searchPanel"
                        class="hidden absolute right-0 top-full mt-2 w-[360px] max-w-[calc(100vw-24px)] bg-[#121212] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[120]"
                    >
                        <div id="searchLoadingState" class="hidden grid grid-cols-3 gap-3 p-3">
                            <div class="h-32 rounded-lg skeleton"></div>
                            <div class="h-32 rounded-lg skeleton"></div>
                            <div class="h-32 rounded-lg skeleton"></div>
                            <div class="h-32 rounded-lg skeleton"></div>
                            <div class="h-32 rounded-lg skeleton"></div>
                            <div class="h-32 rounded-lg skeleton"></div>
                        </div>
                        <div id="searchEmptyState" class="hidden text-center text-sm text-gray-400 py-6 px-3">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
                        <div id="searchResultsGrid" class="grid grid-cols-3 gap-3 p-3 max-h-[480px] overflow-y-auto"></div>
                    </div>
                </div>
                <button id="profileButton" class="w-[32px] h-[32px] rounded-full bg-[#2d2d2d] border border-white/10 flex items-center justify-center text-xs text-white spring-bounce hover:border-[#4F46E5] hover:shadow-[0_0_12px_rgba(79,70,229,0.4)]">
                    <span class="sr-only">í”„ë¡œí•„</span>
                    <span id="profileButtonText">ë¡œê·¸ì¸</span>
                </button>
            </div>
        </header>

        <div id="toastContainer" class="fixed top-4 left-1/2 -translate-x-1/2 z-[110] space-y-2 w-[calc(100%-32px)] max-w-[480px] pointer-events-none"></div>

        <main class="min-h-screen pb-24 relative">
             <!-- Top Filters Container -->
            <div id="filtersWrapper" class="sticky top-[56px] z-40 bg-[#121212] transition-colors duration-300">
                <!-- Tab 5 Specific: Segmented Toggle -->
                <div id="mySubToggleContainer" class="hidden px-4 py-3 h-[68px] items-center">
                    <div class="w-full bg-[#2A2A2A] h-[44px] rounded-lg p-1 flex relative">
                        <div id="toggleIndicator" class="absolute top-1 bottom-1 w-[calc(50%-4px)] bg-[#3F3F46] rounded-md transition-transform duration-300 translate-x-0"></div>
                        <button class="flex-1 z-10 text-[13px] font-bold text-center leading-[36px] text-white" onclick="updateMySubTab('subscribing')">êµ¬ë…ì¤‘</button>
                        <button class="flex-1 z-10 text-[13px] font-bold text-center leading-[36px] text-gray-400" onclick="updateMySubTab('completed')">ì™„ê²°ë¨</button>
                    </div>
                </div>

                 <!-- Tab 4 Specific: Sort Options -->
                <div id="seriesSortOptions" class="hidden flex justify-end px-4 py-2 text-[11px] text-[#A3A3A3] gap-2">
                    <span class="text-white font-bold cursor-pointer">ìµœì‹ ìˆœ</span>
                    <span>|</span>
                    <span class="cursor-pointer">ê°€ë‚˜ë‹¤ìˆœ</span>
                </div>

                <!-- L1 Filter (Logos) -->
                <div id="l1FilterContainer" class="h-[60px] flex items-center px-4 overflow-x-auto hide-scrollbar gap-3 hidden"></div>

                <!-- L2 Filter (Detail Categories) -->
                <div id="l2FilterContainer" class="h-[40px] flex items-center px-4 overflow-x-auto hide-scrollbar border-b border-white/5 hidden"></div>
            </div>

            <!-- Content Grid -->
            <div id="contentGridContainer" class="p-4 grid grid-cols-3 gap-3 fade-in mt-2 min-h-[50vh]">
                <!-- Skeleton/Content injected here -->
            </div>

             <!-- Tab 4 Footer Button -->
            <div id="seriesFooterButton" class="hidden px-4 pb-6 w-full">
                <button class="w-full h-[52px] bg-transparent border border-dashed border-[#525252] rounded-xl flex justify-center items-center cursor-pointer hover:bg-[#1E1E1E] hover:text-white hover:border-transparent transition-all group">
                     <span class="text-[13px] text-[#A3A3A3] group-hover:text-white">(+) ë‹¹ì‹ ì˜ ì‹œë¦¬ì¦ˆë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</span>
                </button>
            </div>

            <div id="statusIndicator" class="text-center py-20"></div>
        </main>

        <!-- 3.2 Bottom Navigation -->
        <nav id="bottomNav" class="fixed bottom-0 max-w-[480px] w-full mx-auto glass-bg border-t border-white/5 z-50 pb-safe h-[64px] grid grid-cols-5">
            <!-- Icons injected via JS -->
        </nav>

        <!-- Modals -->
        <div id="subscribeModal" class="fixed inset-0 flex items-center justify-center z-[100] hidden">
            <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
            <div id="modalContent" class="relative z-10 bg-[#1e1e1e] p-6 rounded-2xl w-[90%] max-w-sm mx-auto shadow-2xl transform transition-all">
                <h2 class="text-xl font-bold mb-1 text-white">ì™„ê²° ì•Œë¦¼ ë°›ê¸°</h2>
                <p id="modalWebtoonTitle" class="mb-4 text-gray-400 text-sm"></p>
                <div id="modalWebtoonLinkContainer" class="mb-6 text-sm"></div>
                <div class="flex justify-end gap-2">
                    <button id="cancelButton" onclick="closeModal()" class="px-4 py-2 rounded-lg bg-[#3a3a3c] text-gray-300 text-sm font-medium spring-bounce">ë‹«ê¸°</button>
                    <button id="subscribeButton" onclick="toggleSubscriptionFromModal()" class="px-4 py-2 rounded-lg bg-[#4f46e5] text-white text-sm font-bold spring-bounce neon-glow">êµ¬ë…/í•´ì œ</button>
                </div>
            </div>
        </div>
        <div id="searchModal" class="fixed inset-0 flex items-center justify-center z-[115] hidden">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" id="searchOverlay"></div>
            <div class="relative z-10 bg-[#1E1E1E] border border-white/5 p-5 rounded-2xl w-[92%] max-w-xl mx-auto shadow-2xl transform transition-all" id="searchPanel">
                <div class="flex items-center justify-between mb-3">
                    <h2 class="text-lg font-bold text-white">ê²€ìƒ‰</h2>
                    <button id="searchCloseBtn" class="text-gray-400 hover:text-white spring-bounce" aria-label="ê²€ìƒ‰ ë‹«ê¸°">âœ•</button>
                </div>
                <div class="flex items-center gap-2 mb-3">
                    <div class="relative flex-1">
                        <input id="searchInput" type="text" class="w-full px-4 py-3 bg-[#2a2a2a] border border-white/10 rounded-xl text-white focus:outline-none focus:border-[#4F46E5]" placeholder="ì‘í’ˆëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                        <button id="searchClearBtn" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white" aria-label="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°">âœ•</button>
                    </div>
                    <button id="searchSubmitBtn" class="px-4 py-3 rounded-xl bg-[#4F46E5] text-white text-sm font-bold spring-bounce">ê²€ìƒ‰</button>
                </div>
                <div id="searchEmptyState" class="text-center text-sm text-gray-400 py-8">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>
                <div id="searchLoadingState" class="grid grid-cols-3 gap-3 hidden">
                    <div class="h-32 rounded-lg skeleton"></div>
                    <div class="h-32 rounded-lg skeleton"></div>
                    <div class="h-32 rounded-lg skeleton"></div>
                </div>
                <div id="searchResultsGrid" class="grid grid-cols-3 gap-3"></div>
            </div>
        </div>
        <div id="authModal" class="fixed inset-0 flex items-center justify-center z-[120] hidden">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
            <div class="relative z-10 bg-[#1E1E1E] border border-white/5 p-6 rounded-2xl w-[90%] max-w-sm mx-auto shadow-2xl transform transition-all">
                <h2 id="authTitle" class="text-xl font-bold mb-1 text-white">ë¡œê·¸ì¸</h2>
                <p class="text-gray-400 text-sm mb-4">ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                <div class="space-y-3">
                    <input id="authEmail" type="email" class="w-full px-3 py-2 rounded-lg bg-[#2a2a2a] border border-white/10 text-sm text-white focus:outline-none focus:border-[#4F46E5]" placeholder="email" />
                    <input id="authPassword" type="password" class="w-full px-3 py-2 rounded-lg bg-[#2a2a2a] border border-white/10 text-sm text-white focus:outline-none focus:border-[#4F46E5]" placeholder="password" />
                    <div id="authPasswordConfirmRow" class="space-y-2 hidden">
                        <label class="block text-sm font-medium text-gray-300">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                        <input id="authPasswordConfirm" type="password" class="w-full px-4 py-3 bg-[#111] border border-white/10 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-[#4F46E5]" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥" />
                    </div>
                    <p id="authError" class="text-red-400 text-xs min-h-[16px]"></p>
                </div>
                <div class="flex justify-end gap-2 mt-4">
                    <button id="authCloseBtn" class="px-4 py-2 rounded-lg bg-[#3a3a3c] text-gray-300 text-sm font-medium spring-bounce">ë‹«ê¸°</button>
                    <button id="authSubmitBtn" class="px-4 py-2 rounded-lg bg-[#4f46e5] text-white text-sm font-bold spring-bounce neon-glow">ë¡œê·¸ì¸</button>
                </div>
                <div class="mt-4 text-center text-xs text-gray-400">
                    <span id="authModeHintText">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?</span>
                    <button id="authToggleModeBtn" type="button" class="ml-1 text-[#4F46E5] font-bold hover:underline">íšŒì›ê°€ì…</button>
                </div>
            </div>
        </div>
        <div id="toast" class="fixed bottom-24 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-full bg-gray-800 text-white text-sm opacity-0 transition-opacity duration-300 pointer-events-none z-[110]"></div>
    </div>

    <script src="/static/app.js" defer></script>
</body>
</html>
