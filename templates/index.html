<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ending Signal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        :root {
            --bg-app: #121212;
            --bg-card: #1E1E1E;
            --bg-overlay: rgba(30, 30, 30, 0.85);
            --brand-primary: #4F46E5;
            --brand-secondary: #FACC15;
            --text-white: #FFFFFF;
            --text-gray-100: #E5E5E5;
            --text-gray-400: #A3A3A3;
            --text-gray-600: #D4D4D4;
            --brand-glow: 0 0 10px rgba(79, 70, 229, 0.5);
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
            background-color: var(--bg-app);
            color: var(--text-white);
            margin: 0;
            overscroll-behavior-y: contain;
        }

        #app-root {
            width: 100%;
            max-width: 480px;
            min-height: 100vh;
            margin: 0 auto;
            background-color: var(--bg-app);
            position: relative;
            overflow-x: hidden;
            box-shadow: none;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (Global) */
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }

        /* Safe Area for Bottom Nav */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }

        /* Animation Utilities */
        .spring-bounce:active { transform: scale(0.95); transition: transform 0.1s; }
        .fade-in { animation: fadeIn 0.2s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Neon Glow Utilities */
        .neon-glow {
            box-shadow: var(--brand-glow);
        }
        .neon-text-glow {
            text-shadow: 0 0 8px rgba(79, 70, 229, 0.6);
        }
        .neon-drop-shadow {
            filter: drop-shadow(0 0 5px rgba(79, 70, 229, 0.6));
        }

        /* Glassmorphism - Updated to match unified BG #121212 */
        .glass-bg {
            background-color: rgba(18, 18, 18, 0.95); /* #121212 with slight transparency */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* L1 Logo Filter Styles */
        .l1-logo {
            width: 42px; height: 42px; border-radius: 50%;
            transition: all 0.2s;
            background-color: #333; /* Placeholder for logo img */
            display: flex; align-items: center; justify-content: center;
            font-size: 10px; font-weight: bold; color: #fff;
        }
        .l1-logo.active {
            border: 2px solid var(--brand-primary);
            opacity: 1;
            box-shadow: var(--brand-glow);
        }
        .l1-logo.inactive { opacity: 0.4; filter: grayscale(100%); }

        /* L2 Text Tab Styles */
        .l2-tab {
            font-size: 13px; font-weight: 500;
            color: var(--text-gray-600);
            padding: 8px 0;
            margin-right: 20px;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        .l2-tab.active {
            color: var(--text-white);
            border-bottom-color: var(--brand-primary);
            text-shadow: 0 0 5px rgba(255,255,255,0.3);
        }

        /* Skeleton Loading */
        .skeleton {
            background-color: var(--bg-card);
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* Button spinner */
        .btn-spinner {
            width: 14px;
            height: 14px;
            border: 2px solid rgba(255, 255, 255, 0.35);
            border-top-color: rgba(255, 255, 255, 0.9);
            border-radius: 9999px;
            display: inline-block;
            vertical-align: middle;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div id="app-root">
        <!-- 3.1 Sticky Header -->
        <header id="mainHeader" class="sticky top-0 z-50 h-[56px] px-4 glass-bg border-b border-white/5 flex items-center justify-between transition-all duration-300 relative">
            <div id="homeButton" class="flex items-center cursor-pointer spring-bounce">
                <h1 class="text-[22px] font-black text-white tracking-tighter flex items-center">
                    EN<span class="text-[#FACC15] text-[20px] ml-0.5 -rotate-15 transform block">ğŸ””</span>
                </h1>
            </div>
            <div class="flex items-center gap-4">
                <div id="headerSearchWrap" class="relative flex items-center">
                    <button id="searchButton" data-ui="header-btn" class="h-10 w-10">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                    <input
                        id="searchInput"
                        type="text"
                        data-ui="search-trigger"
                        class="ml-2 w-[180px]"
                        placeholder="ê²€ìƒ‰"
                        readonly
                    />
                </div>
                <button id="profileButton" data-ui="header-btn" aria-haspopup="menu" aria-expanded="false" class="h-[32px] px-3 whitespace-nowrap">
                    <span class="sr-only">í”„ë¡œí•„</span>
                    <span id="profileButtonText">Login</span>
                </button>
                <div id="profileMenu" data-ui="menu-wrap" class="hidden absolute right-4 top-[48px] z-[130] w-40" role="menu" aria-label="í”„ë¡œí•„ ë©”ë‰´">
                    <button id="profileMenuMy" data-ui="menu-item" role="menuitem">ë‚´ êµ¬ë…</button>
                    <button id="profileMenuMyPage" data-ui="menu-item" role="menuitem">ë§ˆì´í˜ì´ì§€</button>
                    <button id="profileMenuLogout" data-ui="menu-item-danger" role="menuitem">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </header>

        <div id="toastContainer" class="fixed top-4 left-1/2 -translate-x-1/2 z-[110] space-y-2 w-[calc(100%-32px)] max-w-[480px] pointer-events-none"></div>

        <main class="min-h-screen pb-24 relative">
             <!-- Top Filters Container -->
            <div id="filtersWrapper" class="sticky top-[56px] z-40 bg-[#121212] transition-colors duration-300">
                <!-- Tab 5 Specific: Segmented Toggle -->
                <div id="mySubToggleContainer" class="hidden px-4 py-3 h-[68px] items-center">
                    <div class="w-full bg-[#2A2A2A] h-[44px] rounded-lg p-1 flex relative">
                        <div id="toggleIndicator" class="absolute top-1 bottom-1 w-[calc(50%-4px)] bg-[#3F3F46] rounded-md transition-transform duration-300 translate-x-0"></div>
                        <button class="flex-1 z-10 text-[13px] font-bold text-center leading-[36px] text-white" onclick="updateMySubTab('subscribing')">êµ¬ë…ì¤‘</button>
                        <button class="flex-1 z-10 text-[13px] font-bold text-center leading-[36px] text-gray-400" onclick="updateMySubTab('completed')">ì™„ê²°ë¨</button>
                    </div>
                </div>

                 <!-- Tab 4 Specific: Sort Options -->
                <div id="seriesSortOptions" class="hidden flex justify-end px-4 py-2 text-[11px] text-[#A3A3A3] gap-2">
                    <span class="text-white font-bold cursor-pointer">ìµœì‹ ìˆœ</span>
                    <span>|</span>
                    <span class="cursor-pointer">ê°€ë‚˜ë‹¤ìˆœ</span>
                </div>

                <!-- L1 Filter (Logos) -->
                <div id="l1FilterContainer" class="h-[60px] flex items-center px-4 overflow-x-auto hide-scrollbar gap-3 hidden"></div>

                <!-- L2 Filter (Detail Categories) -->
                <div id="l2FilterContainer" class="h-[40px] flex items-center px-4 overflow-x-auto hide-scrollbar border-b border-white/5 hidden"></div>
            </div>

            <!-- Content Grid -->
            <div id="contentGridContainer" class="p-4 grid grid-cols-3 gap-3 fade-in mt-2 min-h-[50vh]">
                <!-- Skeleton/Content injected here -->
            </div>

            <div id="contentGridFooter" class="px-4 pb-4 space-y-2">
                <div id="contentCountIndicator" class="text-center text-[11px] text-gray-400"></div>
                <button id="contentLoadMoreBtn" data-ui="load-more" class="hidden">ë” ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <div id="contentGridSentinel" class="h-6 w-full"></div>
            </div>

             <!-- Tab 4 Footer Button -->
            <div id="seriesFooterButton" class="hidden px-4 pb-6 w-full">
                <button class="w-full h-[52px] bg-transparent border border-dashed border-[#525252] rounded-xl flex justify-center items-center cursor-pointer hover:bg-[#1E1E1E] hover:text-white hover:border-transparent transition-all group">
                     <span class="text-[13px] text-[#A3A3A3] group-hover:text-white">(+) ë‹¹ì‹ ì˜ ì‹œë¦¬ì¦ˆë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</span>
                </button>
            </div>

            <div id="statusIndicator" class="text-center py-20"></div>
        </main>

        <!-- 3.2 Bottom Navigation -->
        <nav id="bottomNav" class="fixed bottom-0 max-w-[480px] w-full mx-auto glass-bg border-t border-white/5 z-50 pb-safe h-[64px] grid grid-cols-5">
            <!-- Icons injected via JS -->
        </nav>

        <!-- Modals -->
        <div id="subscribeModal" data-ui="modal-wrap" class="fixed inset-0 z-[100] hidden" role="dialog" aria-modal="true" aria-labelledby="subscribeModalTitle" tabindex="-1">
            <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" data-modal-overlay="true"></div>
            <div id="modalContent" data-ui="modal-card" class="relative">
                <h2 id="subscribeModalTitle" data-ui="modal-title">ì™„ê²° ì•Œë¦¼ ë°›ê¸°</h2>
                <p id="modalWebtoonTitle" data-ui="modal-body" class="mb-4"></p>
                <div id="modalWebtoonLinkContainer" class="mb-6 text-sm"></div>
                <div id="subscribeStateLine" class="flex items-center gap-2 text-white/70 text-sm mb-2">
                    <span id="subscribeStateDot" class="h-2 w-2 rounded-full bg-white/50"></span>
                    <span id="subscribeStateText"></span>
                </div>
                <p id="subscribeInlineError" class="text-red-400 text-xs mt-2"></p>
                <div class="flex justify-end gap-2">
                    <button id="subscribeButton" data-ui="modal-primary" onclick="toggleSubscriptionFromModal()">êµ¬ë…/í•´ì œ</button>
                </div>
            </div>
        </div>
        <div id="searchPage" data-ui="page-overlay-root" class="fixed inset-0 z-[90] hidden h-[100dvh] overflow-hidden" style="height: calc(var(--vvh, 1vh) * 100)">
            <div class="relative z-10 h-full">
                <div id="searchPageContainer" data-ui="page-overlay-container" class="h-full">
                    <div class="flex h-full flex-col min-h-0">
                        <div class="flex items-center gap-2 pt-4 pb-3">
                            <button id="searchBackButton" data-ui="search-back" aria-label="ë’¤ë¡œ">
                                â†
                            </button>

                            <div class="flex-1 relative">
                                <input id="searchPageInput" data-ui="search-input" type="text" inputmode="search" autocomplete="off" placeholder="ì‘í’ˆì„ ê²€ìƒ‰í•´ ë³´ì„¸ìš”" />
                                <button id="searchClearButton" data-ui="search-clear" class="absolute right-2 top-1/2 -translate-y-1/2" aria-label="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°">Ã—</button>
                            </div>
                        </div>

                        <div id="searchPageBody" class="flex-1 min-h-0 overflow-y-auto pb-[calc(96px+env(safe-area-inset-bottom))]">
                            <div id="searchIdle" class="space-y-6">
                                <div class="flex items-center justify-between">
                                    <h2 class="text-base font-semibold">ìµœê·¼ ê²€ìƒ‰ì–´</h2>
                                    <button id="searchRecentClearAll" data-ui="search-recent-clear">ì „ì²´ì‚­ì œ</button>
                                </div>
                                <div id="searchRecentChips" class="flex flex-wrap gap-2"></div>

                                <div class="flex items-center justify-between">
                                    <div class="space-y-0.5">
                                        <h2 id="searchPopularTitle" data-ui="search-popular-title">ìµœê·¼ ë³¸ ì‘í’ˆ</h2>
                                        <p id="searchPopularSubtitle" data-ui="search-popular-subtitle">ìµœê·¼ì— ì—´ì–´ë³¸ ì‘í’ˆì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                                    </div>
                                </div>
                                <div id="searchPopularGrid" data-ui="grid-2to3"></div>
                            </div>

                            <div id="searchResultsView" class="hidden space-y-3">
                                <div class="flex items-center justify-between">
                                    <div data-ui="search-result-label"><span id="searchResultCount">0</span>ê°œ ê²°ê³¼</div>
                                </div>

                                <div id="searchPageLoading" data-ui="grid-2to3" class="hidden"></div>
                                <div id="searchPageResults" data-ui="grid-2to3"></div>

                                <div id="searchPageEmpty" class="hidden py-12 text-center">
                                    <div data-ui="search-empty-title">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                                    <div data-ui="search-empty-msg">ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</div>
                                    <button id="searchPageClearQuery" data-ui="search-empty-button">ê²€ìƒ‰ì–´ ì§€ìš°ê¸°</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="myPage" data-ui="page-overlay-root" class="fixed inset-0 z-[85] hidden h-[100dvh] overflow-hidden" style="height: calc(var(--vvh, 1vh) * 100)">
            <div class="relative z-10 h-full">
                <div id="myPageContainer" data-ui="page-overlay-container" class="h-full">
                    <div class="flex h-full flex-col min-h-0">
                        <div class="flex items-center gap-2 pt-4 pb-3">
                            <button id="myPageBackBtn" data-ui="search-back" aria-label="ë’¤ë¡œ">
                                â†
                            </button>
                            <h2 class="text-base font-semibold">ë§ˆì´í˜ì´ì§€</h2>
                        </div>

                        <div class="flex-1 min-h-0 overflow-y-auto pb-[calc(96px+env(safe-area-inset-bottom))]">
                            <div class="space-y-3">
                                <div data-ui="page-card" class="space-y-3">
                                    <h3 data-ui="section-title">ë‚´ ì •ë³´</h3>
                                    <div class="flex items-center justify-between text-sm">
                                        <span data-ui="section-subtle">ì´ë©”ì¼</span>
                                        <span id="myPageEmailValue" class="text-white/90 font-medium">-</span>
                                    </div>
                                </div>
                                <div data-ui="page-card" class="space-y-3">
                                    <h3 data-ui="section-title">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
                                    <div class="space-y-2">
                                        <label data-ui="input-label" for="myPagePwCurrent">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                                        <input id="myPagePwCurrent" data-ui="input-sm" type="password" autocomplete="current-password" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸" />
                                    </div>
                                    <div class="space-y-2">
                                        <label data-ui="input-label" for="myPagePwNew">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                                        <input id="myPagePwNew" data-ui="input-sm" type="password" autocomplete="new-password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸" />
                                        <p class="text-xs text-white/60">ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                                    </div>
                                    <div class="space-y-2">
                                        <label data-ui="input-label" for="myPagePwConfirm">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                                        <input id="myPagePwConfirm" data-ui="input-sm" type="password" autocomplete="new-password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸" />
                                    </div>
                                    <p id="myPagePwError" class="text-xs text-red-400 min-h-[16px]"></p>
                                    <button id="myPagePwSubmit" data-ui="btn-primary" type="button" class="w-full h-11">ë³€ê²½í•˜ê¸°</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="authModal" data-ui="modal-wrap" class="fixed inset-0 z-[120] hidden" role="dialog" aria-modal="true" aria-labelledby="authTitle" tabindex="-1">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" data-modal-overlay="true"></div>
            <div class="relative z-10 border border-white/5" data-ui="modal-card">
                <h2 id="authTitle" data-ui="modal-title">ë¡œê·¸ì¸</h2>
                <p data-ui="modal-body" class="mb-4">ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                <div class="space-y-3">
                    <input id="authEmail" data-ui="input-sm" type="email" placeholder="email" />
                    <input id="authPassword" data-ui="input-sm" type="password" placeholder="password" />
                    <div id="authPasswordConfirmRow" class="space-y-2 hidden">
                        <label data-ui="input-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                        <input id="authPasswordConfirm" data-ui="input-sm" type="password" class="px-4 py-3 rounded-xl" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥" />
                    </div>
                    <p id="authError" class="text-red-400 text-xs min-h-[16px]"></p>
                </div>
                <div class="flex justify-end gap-2 mt-4">
                    <button id="authCloseBtn" data-ui="modal-secondary">ë‹«ê¸°</button>
                    <button id="authSubmitBtn" data-ui="modal-primary">ë¡œê·¸ì¸</button>
                </div>
                <div class="mt-4 text-center text-xs text-gray-400">
                    <span id="authModeHintText">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?</span>
                    <button id="authToggleModeBtn" type="button" class="ml-1 text-[#4F46E5] font-bold hover:underline">íšŒì›ê°€ì…</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js" defer></script>
</body>
</html>
